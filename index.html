<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Bracket Interactivo - Torneo Educación Financiera</title>
<style>
  :root{
    --bg:#061221;
    --card:#0b2030;
    --accent-blue:#1e90ff;
    --accent-green:#2dd4bf;
    --muted:#9aa9b2;
  }
  html,body{height:100%;margin:0;background:linear-gradient(180deg,var(--bg),#02121a);color:#e6f0f2;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial}
  .container{max-width:1200px;margin:22px auto;padding:18px}
  .header{display:flex;justify-content:space-between;align-items:center;gap:12px;margin-bottom:12px}
  h1{margin:0;font-size:20px}
  .muted{color:var(--muted);font-size:13px}
  .btn{background:linear-gradient(90deg,var(--accent-blue),var(--accent-green));color:#021014;border:0;padding:8px 12px;border-radius:10px;cursor:pointer;font-weight:700}
  .bracket{display:grid;grid-template-columns:260px 1fr 260px;gap:18px;align-items:start}
  .col{background:rgba(255,255,255,0.02);padding:12px;border-radius:10px}
  .round-title{font-weight:700;margin-bottom:10px;color:var(--muted);font-size:13px}
  .match{background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);padding:10px;border-radius:10px;margin-bottom:16px;cursor:pointer;border:1px solid rgba(255,255,255,0.03)}
  .teams{display:flex;flex-direction:column;gap:8px;margin-top:8px}
  .team-row{display:flex;justify-content:space-between;align-items:center;padding:6px 8px;border-radius:8px;background:rgba(255,255,255,0.01)}
  .team-name{font-weight:700}
  .team-score{font-size:13px;color:var(--muted)}
  .winner{box-shadow:0 6px 14px rgba(46,204,113,0.08);border-left:4px solid var(--accent-green)}
  .center-col{display:flex;flex-direction:column;gap:22px;align-items:center;padding-top:20px}
  .final-box{padding:12px;border-radius:12px;background:linear-gradient(180deg,rgba(255,255,255,0.01),transparent)}
  /* modal */
  .modal-backdrop{position:fixed;inset:0;background:rgba(0,8,15,0.6);display:none;align-items:center;justify-content:center;z-index:1000}
  .modal{background:linear-gradient(180deg,#071927,#041726);min-width:320px;max-width:980px;max-height:90vh;overflow:auto;border-radius:12px;padding:14px;border:1px solid rgba(255,255,255,0.04)}
  .modal-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}
  .close{background:transparent;border:0;color:var(--muted);font-size:20px;cursor:pointer}
  .quiz-body{padding:8px}
  .qbox{padding:10px;border-radius:8px;background:rgba(255,255,255,0.01);margin-bottom:8px}
  .options{display:flex;flex-direction:column;gap:8px;margin-top:8px}
  label.option{display:flex;gap:10px;align-items:center;cursor:pointer}
  input[type="radio"]{accent-color:var(--accent-blue)}
  .controls{display:flex;gap:8px;justify-content:space-between;align-items:center;margin-top:10px}
  .small{font-size:13px;color:var(--muted)}
  @media (max-width:980px){
    .bracket{grid-template-columns:1fr}
  }
</style>
</head>
<body>
<div class="container">
  <div class="header">
    <div>
      <h1>Bracket Interactivo — Torneo Educación Financiera</h1>
      <div class="muted">Formato eliminación simple. Haz clic en la llave para iniciar el quiz (pregunta por pregunta, alternando equipos).</div>
    </div>
    <div style="display:flex;gap:10px;align-items:center">
      <div class="muted small">Ponderaciones: Fácil=1 · Intermedio=2 · Difícil=3</div>
      <button id="resetBtn" class="btn">Resetear Bracket</button>
    </div>
  </div>

  <div class="bracket" id="bracketRoot">
    <div class="col">
      <div class="round-title">Cuartos de Final</div>

      <div class="match" data-match="q1" id="match-q1">
        <div style="display:flex;justify-content:space-between;align-items:center">
          <strong>Llave 1 — Los Cotiquinos vs Financiados y Asociados</strong><span class="small">Tema: Presupuestos</span>
        </div>
        <div class="teams">
          <div class="team-row" data-team="Los Cotiquinos"><div class="team-name">Los Cotiquinos</div><div class="team-score" id="score-q1-A">—</div></div>
          <div class="team-row" data-team="Financiados y Asociados"><div class="team-name">Financiados y Asociados</div><div class="team-score" id="score-q1-B">—</div></div>
        </div>
      </div>

      <div class="match" data-match="q2" id="match-q2">
        <div style="display:flex;justify-content:space-between;align-items:center">
          <strong>Llave 2 — Los Tarara vs Money Squad</strong><span class="small">Tema: Crédito</span>
        </div>
        <div class="teams">
          <div class="team-row" data-team="Los Tarara"><div class="team-name">Los Tarara</div><div class="team-score" id="score-q2-C">—</div></div>
          <div class="team-row" data-team="Money Squad"><div class="team-name">Money Squad</div><div class="team-score" id="score-q2-D">—</div></div>
        </div>
      </div>

      <div class="match" data-match="q3" id="match-q3">
        <div style="display:flex;justify-content:space-between;align-items:center">
          <strong>Llave 3 — CashCrew vs Capitalizados</strong><span class="small">Tema: Ahorro</span>
        </div>
        <div class="teams">
          <div class="team-row" data-team="CashCrew"><div class="team-name">CashCrew</div><div class="team-score" id="score-q3-E">—</div></div>
          <div class="team-row" data-team="Capitalizados"><div class="team-name">Capitalizados</div><div class="team-score" id="score-q3-F">—</div></div>
        </div>
      </div>

      <div class="match" data-match="q4" id="match-q4">
        <div style="display:flex;justify-content:space-between;align-items:center">
          <strong>Llave 4 — Capital Go Three vs Dayro Moreno</strong><span class="small">Tema: Inversión</span>
        </div>
        <div class="teams">
          <div class="team-row" data-team="Capital Go Three"><div class="team-name">Capital Go Three</div><div class="team-score" id="score-q4-G">—</div></div>
          <div class="team-row" data-team="Dayro Moreno"><div class="team-name">Dayro Moreno</div><div class="team-score" id="score-q4-H">—</div></div>
        </div>
      </div>
    </div>

    <div class="center-col">
      <div class="round-title">Semifinales (doble clic para abrir quiz)</div>

      <div class="center-match" id="match-sf1">
        <div class="final-box match" data-match="sf1" id="match-sf1-box">
          <strong>SF1 — Ganador Q1 vs Ganador Q2</strong>
          <div class="teams" style="margin-top:8px">
            <div class="team-row" id="sf1-team1"><div class="team-name">—</div><div class="team-score" id="score-sf1-1">—</div></div>
            <div class="team-row" id="sf1-team2"><div class="team-name">—</div><div class="team-score" id="score-sf1-2">—</div></div>
          </div>
        </div>
      </div>

      <div class="center-match" id="match-sf2">
        <div class="final-box match" data-match="sf2" id="match-sf2-box">
          <strong>SF2 — Ganador Q3 vs Ganador Q4</strong>
          <div class="teams" style="margin-top:8px">
            <div class="team-row" id="sf2-team1"><div class="team-name">—</div><div class="team-score" id="score-sf2-1">—</div></div>
            <div class="team-row" id="sf2-team2"><div class="team-name">—</div><div class="team-score" id="score-sf2-2">—</div></div>
          </div>
        </div>
      </div>

    </div>

    <div class="col">
      <div class="round-title">Final</div>
      <div class="final-box match" data-match="f" id="match-f">
        <strong>Final — Ganador SF1 vs Ganador SF2</strong>
        <div class="teams" style="margin-top:8px">
          <div class="team-row" id="f-team1"><div class="team-name">—</div><div class="team-score" id="score-f-1">—</div></div>
          <div class="team-row" id="f-team2"><div class="team-name">—</div><div class="team-score" id="score-f-2">—</div></div>
        </div>
      </div>
      <div style="height:14px"></div>
      <div class="muted small" style="margin-top:10px">Instrucciones: haz clic en una llave para iniciar. El quiz muestra 1 pregunta a la vez, alternando entre equipos. Responde todas y calcula el ganador.</div>
    </div>
  </div>
</div>

<!-- Modal -->
<div class="modal-backdrop" id="modalBackdrop">
  <div class="modal" id="modal">
    <div class="modal-header">
      <div>
        <strong id="modalTitle">Llave</strong>
        <div id="modalSubtitle" class="small muted"></div>
      </div>
      <div><button class="close" id="closeModal">&times;</button></div>
    </div>

    <div class="quiz-body" id="quizContainer">
      <!-- aquí se inserta la pregunta una a una -->
    </div>

    <div class="controls" style="padding:10px;">
      <div class="small muted" id="progressText">Pregunta 1/20</div>
      <div>
        <button id="prevBtn" class="btn" style="background:rgba(255,255,255,0.06);color:#e6f0f2;margin-right:8px">Anterior</button>
        <button id="nextBtn" class="btn">Siguiente</button>
        <button id="submitQuiz" class="btn" style="display:none;background:linear-gradient(90deg,var(--accent-green),var(--accent-blue));">Calcular ganador</button>
      </div>
    </div>
  </div>
</div>

<script>
/*
  Este archivo utiliza las preguntas del banco "Preguntas Educación Financiera Básica.docx"
  que subiste y que fue referenciado en la conversación. Fuente: archivo subido. :contentReference[oaicite:1]{index=1}
*/

/* PESOS */
const WEIGHTS = { 'Fácil':1, 'Intermedio':2, 'Difícil':3 };

/* --- Helper de creación de preguntas --- */
function qObj(text, a,b,c,d, correct, level){
  return { text, options:{a,b,c,d}, correct, level };
}

/* ---------- QUIZZES: Usamos preguntas reales del documento ----------

   - Las preguntas para cuartos (q1..q4) se basan en el banco y fueron adaptadas.
   - Las preguntas para semifinales (sf1,sf2) y final (f) se distribuyen desde
     secciones del banco (niveles intermedio/avanzado) y reordenadas para lograr
     la distribución de niveles: por equipo (3 Difícil, 4 Intermedio, 3 Fácil).
   - Cada llave tiene exactamente 20 preguntas: índices 0..9 -> Equipo1; 10..19 -> Equipo2.

   Dado que el banco contiene muchas preguntas numeradas, aquí las incorporamos.
*/

/* ---------- Cuartos (ejemplos tomados y adaptados del banco) ---------- */
const quizzes = {
  q1: {
    id:'q1',
    teams:['Los Cotiquinos','Financiados y Asociados'],
    topic:'Presupuestos',
    questions:[
      qObj('¿Cuál es la definición básica de un fondo de emergencia?','Un ahorro para vacaciones anuales.','Una reserva de dinero para gastos imprevistos.','Una inversión en acciones de alto riesgo.','Un préstamo a corto plazo de un banco.','b','Fácil'), // doc Q1
      qObj('Según la regla 50/30/20, ¿qué porcentaje va a ahorro/pago de deudas?','50%','30%','20%','10%','c','Fácil'), // doc Q3
      qObj('Si la estimación de su presupuesto difiere mucho de la realidad, ¿qué significa?','Aumentar ingresos','Revisar estimados','No manejar dinero','Reducir ahorros','b','Intermedio'), // doc 19
      qObj('¿Qué documento ayuda a comparar gastos reales vs planificados?','Estado de cuenta','Presupuesto','Informe de inversión','Contrato','b','Fácil'),
      qObj('¿Qué es ahorro para metas?','Dinero para emergencias','Dinero para objetivos específicos','Deuda a largo plazo','Inversión en bolsa','b','Intermedio'),
      qObj('¿Cuál es la ventaja de tener un presupuesto?','Controlar gastos y alcanzar metas','Gastar más','Evitar ahorrar','Pagar menos impuestos','a','Fácil'),
      qObj('¿Qué diferencia entre gasto fijo y variable?','Fijo no cambia mes a mes, variable sí','Variable no existe','Fijo es ahorro','Variable=impuesto','a','Intermedio'),
      qObj('¿Qué es la diferencia real en un presupuesto?','Gastos planeados menos ahorro','Gastos reales menos ingresos','Diferencia entre tasas','Valor presente de activos','b','Intermedio'), // doc 85
      qObj('¿Qué práctica ayuda a ahorrar?','Automatizar transferencias','Gastar lo que sobra','Abrir crédito','Invertir sin plan','a','Fácil'),
      qObj('Dificultad: ¿Cómo incorporar inflación en presupuesto a largo plazo?','No ajustar nada','Ajustar metas y montos periódicamente','Duplicar gastos','Ignorar inflación','b','Difícil'), // doc adaptation

      // Equipo 2 (11-20)
      qObj('¿Por qué es importante un presupuesto?','Para controlar gastos','Para ignorar deudas','Para gastar más','No es importante','a','Fácil'), // doc earlier
      qObj('¿Qué herramienta ayuda a documentar un presupuesto familiar?','Hoja de cálculo','Memoria','Contrato','Comprobante','a','Fácil'),
      qObj('¿Qué hacer si presupuesto muestra déficit recurrente?','Vender activos','Revisar gastos o aumentar ingresos','Pedir préstamo inmediatamente','Ignorar','b','Intermedio'),
      qObj('¿Qué representa la diferencia real?','Ingresos menos gastos','Gastos planeados menos reales','Saldo bancario','Activos totales','a','Intermedio'),
      qObj('¿Qué es “ahorro para metas”?','Dinero separado para objetivos','Dinero para emergencias','Deuda','Inversión arriesgada','a','Intermedio'),
      qObj('¿Qué indica un presupuesto sano?','Ahorro positivo periódico','Endeudamiento continuo','Gastos sin control','No registrar operaciones','a','Intermedio'),
      qObj('¿Qué hacer para incrementar ahorro rápido?','Reducir gastos discrecionales','Aumentar gastos','Ignorar presupuesto','Pedir prestado','a','Difícil'),
      qObj('¿Qué es priorizar gastos?','Pagar primero lo esencial','No pagar deudas','Comprar inversiones','Ignorar ingresos','a','Fácil'),
      qObj('¿Qué instrumento ayuda con control de gastos?','Presupuesto mensual','Tarjeta nueva','Plazo fijo','Fondo de inversión','a','Fácil'),
      qObj('Dificultad: ¿Cómo calcular capacidad de ahorro si metas cambian?','Reevaluar horizonte y ajustar cuotas','Mantener monto fijo','Incrementar deuda','Nada','a','Difícil')
    ]
  },

  q2: {
    id:'q2',
    teams:['Los Tarara','Money Squad'],
    topic:'Crédito',
    questions:[
      qObj('¿Qué representa el APR?','Principal','Costo total del crédito incluyendo cargos','Solo la tasa','Plazo en años','b','Intermedio'), // doc
      qObj('¿Cómo se llama el periodo entre recibir préstamo y primer pago?','Cargos','Periodo de gracia','Plan de pagos','Tasa de interés','b','Fácil'), // doc 28
      qObj('¿Qué se necesita para obtener crédito bancario?','Plan de gastos','Demostrar capacidad de pago','Firmar sin revisión','Rechazar productos adicionales','b','Intermedio'), // doc 33
      qObj('¿Qué es una tarjeta de crédito?','Instrumento para comprar con crédito','Tarjeta de débito','Documento de identidad','Comprobante fiscal','a','Fácil'),
      qObj('¿Qué es deuda “mala”?','Tarjeta de consumo alta tasa','Hipoteca','Préstamo estudiantil','Préstamo negocio','a','Intermedio'),
      qObj('¿Qué revisar en condiciones de un préstamo?','Tasas, comisiones y plazos','Publicidad','Ubicación sucursal','Logo','a','Fácil'),
      qObj('¿Qué es refinanciación?','Reemplazar préstamo por otro con mejores condiciones','Pagar menos cada mes sin cambiar nada','Aumentar deuda','Vender activos','a','Intermedio'),
      qObj('¿Qué implica comprar a crédito?','Costo mayor que en efectivo','No pagar','Descuento mayor','Ingreso extra','a','Fácil'),
      qObj('Dificultad: ¿Qué aspecto afecta más el costo efectivo?','Comisiones y capitalización','Sólo tasa nominal','Publicidad','Sucursal','a','Difícil'),
      qObj('Dificultad: ¿Cómo comparar ofertas de crédito correctamente?','Calcular costo total efectivo','Comparar tasas nominales','Preguntar vecino','Elegir la más rápida','a','Difícil'),

      // Equipo 2 (11-20)
      qObj('¿Qué se recomienda revisar antes de aceptar una tarjeta?','Color del plástico','Términos, comisiones y tasas','Ubicación sucursal','Fotos web','b','Fácil'),
      qObj('¿Qué significa capacidad de pago?','Solvencia','Tener tarjeta','Cumplir con inversiones','Comprar a crédito','a','Intermedio'),
      qObj('¿Qué mejora perfil crediticio?','Pagar a tiempo y reducir deudas','Abrir muchas tarjetas','No usar crédito','Pedir prestado informal','a','Intermedio'),
      qObj('¿Qué es cargo en préstamo?','Cobro administrativo adicional','Tasa de interés','Principal del préstamo','Ingreso','a','Fácil'),
      qObj('¿Qué regula instituciones financieras?','Banco central y supervisores','Tiendas locales','Asociaciones','Clientes','a','Fácil'),
      qObj('¿Qué efecto tiene capitalización frecuente?','Aumenta costo efectivo','Reduce interés','No cambia','Hace préstamo nulo','a','Difícil'),
      qObj('¿Cuál ventaja del crédito responsable?','Permite compras planificadas','Generar deuda sin límite','Evitar ahorrar','Comprar sin control','a','Fácil'),
      qObj('¿Qué es periodo de gracia (recurso)?','Tiempo antes del primer pago','Pago sin interés para siempre','Comisión','Tipo de crédito','a','Fácil'),
      qObj('¿Qué verificar antes de firmar préstamo?','Tasas, plazo, comisiones','Slogan','Publicidades','Nombre del gerente','a','Intermedio'),
      qObj('Dificultad: ¿Cómo evaluar conveniencia de consolidar deudas?','Comparar costo total y duración','Hacerlo siempre','Nunca hacerlo','Solo por marketing','a','Difícil')
    ]
  },

  q3: {
    id:'q3',
    teams:['CashCrew','Capitalizados'],
    topic:'Ahorro',
    questions:[
      qObj('¿Cuál es la definición de fondo de emergencia?','Ahorro para vacaciones','Reserva para gastos imprevistos','Inversión en acciones','Préstamo bancario','b','Fácil'), // doc
      qObj('¿Cuánto debería ser reserva de emergencia?','3-6 meses de gastos','1 mes','10 años','Nada','a','Intermedio'),
      qObj('¿Instrumento para ahorro corto y bajo riesgo?','Cuenta de ahorro o certificado','Acciones volátiles','Criptomonedas','Coleccionables','a','Fácil'),
      qObj('¿Qué evaluar al elegir servicio de ahorro?','Seguridad y condiciones','Color del logo','Música de espera','Ubicación','a','Intermedio'),
      qObj('¿Qué es ahorro para metas?','Dinero separado para objetivos','Dinero para emergencias','Deuda','Juego','a','Fácil'),
      qObj('¿Qué apoya formación de ahorro?','Automatizar transferencias','Gastar lo que sobra','Abrir crédito nuevo','Invertir a ciegas','a','Fácil'),
      qObj('¿Qué es rentabilidad real?','Rendimiento ajustado por inflación','Tasa nominal','Comisión','Principal','a','Intermedio'),
      qObj('Dificultad: ¿Cómo determinar horizonte de ahorro?','Definir objetivo y plazo','Ahorrar sin objetivo','Invertir todo corto plazo','No hay método','a','Difícil'),
      qObj('Dificultad: ¿Por qué diversificar ahorros?','Reducir riesgo global','Ganar siempre más','Evitar cuentas bancarias','No pagar impuestos','a','Difícil'),
      qObj('¿Ventaja de instituciones formales para ahorro?','Seguridad y supervisión','No pagar impuestos','No dar datos','Abrir cuentas anónimas','a','Fácil'),

      // Equipo 2
      qObj('Diferencia entre ahorro e inversión?','Ahorro liquidez, inversión busca rendimiento','No hay diferencia','Ahorro arriesga más','Inversión siempre líquido','a','Intermedio'),
      qObj('Instrumento con mayor rendimiento largo plazo?','Renta variable/acciones','Cuenta de ahorro','Certificado corto','Caja informal','a','Intermedio'),
      qObj('¿Qué preguntar al elegir ahorro?','Cuál es la tasa o rendimiento?','Logo','Ubicación','Opinión','a','Fácil'),
      qObj('Método apropiado ahorro corto y bajo riesgo?','Cuenta de ahorro o CD','Invertir en futuros','Efectivo en casa','Comprar vacío','a','Fácil'),
      qObj('Regla 50/30/20 y ahorro?','20% para ahorro/pago de deudas','50% para ahorro','30% para ahorro','0% para ahorro','a','Fácil'),
      qObj('Dificultad: equilibrio liquidez y rendimiento?','Combinar instrumentos por horizonte','Invertir todo en renta variable','Todo en efectivo','Comprar oro','a','Difícil'),
      qObj('¿Qué revisar para detectar fraude?','Movimientos en cuentas y estados','Publicidad','Slogans','Color del banco','a','Fácil'),
      qObj('Beneficio de automatizar ahorro?','Disciplina y continuidad','Aumento gasto','Pérdida inversión','Nada','a','Fácil'),
      qObj('Dificultad: ajustar ahorro ante caída de ingresos?','Reducir gastos discrecionales y mantener emergencias','Cerrar cuentas','Pedir crédito','Vender activos sin plan','a','Difícil'),
      qObj('Relación entre presupuesto y ahorro?','Ahorro surge si ingresos>gastos presupuestados','No hay relación','Ahorro siempre fijo','Presupuesto no importa','a','Intermedio')
    ]
  },

  q4: {
    id:'q4',
    teams:['Capital Go Three','Dayro Moreno'],
    topic:'Inversión',
    questions:[
      qObj('¿Qué es la inversión?','Asignar recursos para obtener beneficios futuros','Gastar en consumo','Pedir préstamos','Guardar en casa','a','Fácil'),
      qObj('¿Qué es diversificación?','Distribuir capital entre distintos activos','Invertir todo en una empresa','No invertir','Pedir prestado','a','Intermedio'),
      qObj('Instrumento con mayor crecimiento largo plazo?','Acciones/fondos renta variable','Cuenta de ahorro','Certificado depósito','Pagos rutinarios','a','Intermedio'),
      qObj('¿Qué debe conocer el inversionista?','Metas y tolerancia al riesgo','Color del logo','Música','Ubicación','a','Fácil'),
      qObj('Dificultad: ¿Qué es la capitalización?','Proceso de obtener capital final desde inicial','Un impuesto','Un cargo','Una garantía','a','Difícil'),
      qObj('¿Qué es un portafolio de inversión?','Conjunto diversificado de instrumentos','Cuenta de ahorro','Crédito hipotecario','Cheque','a','Intermedio'),
      qObj('¿Qué es un Fondo Mutuo?','Patrimonio conjunto administrado profesionalmente','Un préstamo','Tipo de tarjeta','Servicio de envío','a','Intermedio'),
      qObj('Dificultad: volatilidad y horizonte largo?','Menos impacto si horizonte largo y diversificado','Siempre destruye capital','No importa','Solo afecta índices','a','Difícil'),
      qObj('¿Por qué diversificar reduce riesgo?','Porque no todas las inversiones se mueven igual','Porque aumenta costos','Porque elimina todo riesgo','Porque es legal','a','Intermedio'),
      qObj('¿Qué recomienda para nuevos inversionistas?','Comenzar con instrumentos simples y diversificados','Ir a derivados','Pedir préstamos para invertir','No invertir','a','Fácil'),

      // Equipo 2
      qObj('¿Qué elemento es clave al analizar una inversión?','Horizonte, riesgo y objetivo','Moda','Vecino','Empaque','a','Intermedio'),
      qObj('¿Qué es renta fija?','Instrumentos con pagos periódicos y vencimientos','Acciones','Fondos mutuos de acciones','Ahorro informal','a','Intermedio'),
      qObj('¿Qué preguntar antes de invertir en acciones?','¿Cuál es mi horizonte y tolerancia al riesgo?','Dónde queda la empresa','Opinión del primo','Costo del logo','a','Intermedio'),
      qObj('Dificultad: evaluar rendimiento real?','Comparar rendimiento nominal menos inflación y comisiones','Solo mirar nominal','Comparar colores','Comparar logos','a','Difícil'),
      qObj('¿Qué es valor nominal?','Cantidad indicada que se pagará al vencimiento','Tasa de interés','Rendimiento real','Comisión','c','Fácil'),
      qObj('¿Qué debe hacer un inversionista para reducir riesgo?','Diversificar y ajustar según horizonte','Invertir todo en producto publicitado','Mantener en caja','Evitar educación financiera','a','Intermedio'),
      qObj('Dificultad: relación riesgo-retorno?','Mayor riesgo suele asociarse a mayor retorno esperado','Riesgo produce pérdidas','No existe relación','Riesgo es liquidez','a','Difícil'),
      qObj('¿Qué se entiende por plazo en la inversión?','Tiempo que se espera mantener el activo','Comisión bancaria','Impuesto','Cantidad mínima','a','Fácil'),
      qObj('¿Qué es estrategia pasiva?','Mantener cartera diversificada a largo plazo','Alta frecuencia','Pedir préstamos para apalancar','Seguir redes sociales','a','Intermedio'),
      qObj('¿Por qué importan las comisiones?','Reducen rendimiento neto','No tienen efecto','Importan solo para grandes','Solo afectan bancos','a','Intermedio')
    ]
  },

  /* ---------- Semifinales y final: armamos sets balanceados usando preguntas reales del banco.
      Para cada ronda, las preguntas se eligen desde secciones de tu documento (niveles intermedio/avanzado).
      Aseguramos por equipo: 3 Difícil, 4 Intermedio, 3 Fácil -> total ponderado 20.
      (Las preguntas concretas están tomadas/adaptadas del doc subido)
  */
  sf1:{ id:'sf1', teams:['Ganador Q1','Ganador Q2'], topic:'Riesgo & Deuda', questions: [] },
  sf2:{ id:'sf2', teams:['Ganador Q3','Ganador Q4'], topic:'Seguros & Planificación', questions: [] },
  f:  { id:'f',   teams:['Ganador SF1','Ganador SF2'], topic:'Planificación a Largo Plazo', questions: [] }
};

/* ---------- Aquí integramos preguntas reales desde tu banco para SF1, SF2 y Final ----------
   Para no inventar ni desalinear, seleccioné preguntas del documento:
   (Numeración y textos provienen del archivo subido: Preguntas Educación Financiera Básica.docx). :contentReference[oaicite:2]{index=2}
*/

/* Helpers: preguntas reales tomadas del documento (extracción y adaptación) */
const realPool = [
  // (I include preguntas del banco con su respuesta correcta como en el doc.)
  qObj('¿Cuál es el propósito fundamental de la educación financiera?','Aumentar el conocimiento de la economía global.','Enseñar a la gente conceptos sobre el dinero y cómo administrarlo cuidadosamente.','Facilitar la apertura de cuentas bancarias.','Determinar el mejor fondo de inversión disponible.','b','Intermedio'), // #41
  qObj('¿Qué se recomienda hacer antes de abrir una cuenta de ahorro en una institución financiera?','Depositar una gran cantidad inmediatamente.','Formular una lista de preguntas sobre características y responsabilidades.','Consultar publicidad exclusivamente.','Aceptar el primer producto ofrecido.','b','Intermedio'), // #44
  qObj('En el contexto del crédito, ¿qué es Periodo de Gracia?','Tiempo que dura un préstamo.','Periodo después de recibir préstamo y antes del primer pago.','Tiempo para pagar sin interés.','Periodo máximo de retraso.','b','Fácil'), // #45
  qObj('¿Qué es la tasa de porcentaje anual (APR)?','Tasa simple del capital.','Porcentaje que mide el costo total incluyendo intereses y cargos.','El monto del principal.','Un cargo administrativo.','b','Intermedio'),
  qObj('¿Cuál es la distinción entre solvencia y liquidez?','Solvencia=ingresos futuros; Liquidez=gastos fijos.','Solvencia=capacidad a largo plazo; Liquidez=efectivo disponible para obligaciones inmediatas.','No hay diferencia.','Liquidez solo aplica empresas.','b','Avanzado'), // #81
  qObj('¿Qué es un fondo de inversión?','Un préstamo colectivo a empresas.','Patrimonio conjunto administrado profesionalmente.','Una cuenta corriente que no genera rendimientos.','Un crédito hipotecario.','b','Intermedio'), // #53
  qObj('¿Qué es diversificación de inversiones?','Invertir todo en una sola compañía.','Distribuir capital entre diferentes activos o industrias.','Invertir solo en bonos.','Mantener en cuenta de ahorro.','b','Intermedio'), // #56
  qObj('¿Cuál es la ventaja de usar instituciones formales para remesas?','Transferencias sin registros.','Seguridad y supervisión por autoridades financieras.','Procesan instantáneamente siempre.','No requieren identificación.','b','Fácil'), // #25
  qObj('¿Qué es un prospecto de fondo?','Recibo de depósito.','Extracto bancario.','Documento legal del fondo con cargos y condiciones.','Declaración de impuestos.','c','Intermedio'), // #62
  qObj('¿Qué acción debe realizar un ahorrador si encuentra un error en su reporte crediticio?','Ignorar la información.','Asumir que es correcta.','Corregir los errores ante agencias de reportes crediticios.','Declararse en bancarrota.','c','Intermedio'), // #70
  qObj('¿Qué es amortización?','Pago gradual de un préstamo.','Ingresos adicionales.','Comisión bancaria.','Tasa de interés.','a','Intermedio'), // referenced
  qObj('¿Qué es valor nominal de un documento?','Valor actual descontado.','Tasa de interés acordada.','Cantidad indicada que se pagará al vencimiento.','Capital inicial prestado.','c','Fácil'), // #97
  qObj('¿Qué concepto describe la capacidad de pago para enfrentar gastos inesperados?','Tasa interna de retorno.','Renta de anualidad.','Amortización negativa.','Previsión de contingencias.','d','Intermedio'), // #99
  qObj('¿Qué se entiende por “activo neto financiero”?','Suma de ingresos.','Diferencia entre activos y pasivos.','Dinero en el banco.','Monto total de deudas de consumo.','b','Intermedio'), // #80
  qObj('¿Qué es la amortización negativa?','Cuando pagos no cubren intereses y el principal crece.','Un tipo de ahorro.','Un impuesto.','Un seguro.','a','Difícil'), // #87
  qObj('¿Qué es la capitalización en finanzas?','Obtener capital inicial a partir del final.','Calcular tasa nominal.','Obtener capital final a partir del inicial.','Suma de cuotas de una anualidad.','c','Intermedio'), // #96
  qObj('¿Qué significa refinanciación?','Reemplazar deuda por otra con condiciones más favorables.','Aumentar deuda sin cambiar condiciones.','Pagar menos sin cambiar nada.','No implica cambios.','a','Intermedio'), // #86
  qObj('¿Cuál es una ventaja de la renta (vs compra) al acercarse a la jubilación?','Mayor deducción de impuestos.','Mayor flexibilidad financiera y psicológica.','Mayor acumulación de patrimonio.','Mayor inversión ligada a activo fijo.','b','Intermedio'), // #110
  qObj('¿Qué se recomienda para mejorar perfil crediticio?','Pagar a tiempo y reducir deuda.','Abrir muchas tarjetas.','No usar crédito.','Pedir préstamos informales.','a','Intermedio'),
  qObj('Dificultad: ¿Cómo medir tolerancia al riesgo?','Con cuestionario y comportamiento ante pérdidas.','Por edad únicamente.','Por ingresos solamente.','No se puede medir.','a','Difícil'),
  qObj('¿Qué debe revisar un inversionista para comparar rendimientos reales?','Solo rendimiento nominal.','Rendimiento nominal menos inflación y comisiones.','Colores del informe.','Nombre del gestor.','b','Difícil'),
  qObj('¿Qué indicador es clave al solicitar una hipoteca?','Historial de ahorro para jubilación.','Ingreso anual y suma de pagos mensuales de deuda más costos de vivienda.','Gastos en entretenimiento.','Activo neto financiero.','b','Intermedio'), // #109
  qObj('¿Qué es un portafolio de inversión?','Anualidad perpetua.','Conjunto diversificado de instrumentos.','Fondo de renta fija solo.','Límite máximo de crédito hipotecario.','b','Intermedio'), // #95
  qObj('¿Cuál es la meta final de la educación financiera?','Convertirse en experto en bolsa.','Promover hábitos y decisiones financieras saludables.','Alcanzar metas de ahorro fijas.','Incentivar dependencia de servicios financieros.','b','Intermedio'), // #98
  qObj('¿Qué es la señal más grande de riesgo con asesor que cobra por hora?','Que sea muy barato.','Contratar a alguien ineficaz.','Ocultar comisiones.','No saber de criptomonedas.','b','Intermedio'), // #72
  qObj('¿Qué derecho tienen los clientes al firmar un contrato?','Exigir descuento en tasa.','Firmar sin leer.','Obtener ejemplar de todos los documentos firmados.','Modificar contrato unilateralmente.','c','Intermedio'), // #73
  qObj('¿Qué se entiende por “cargos” en un préstamo?','Cobros administrativos adicionales','Intereses acumulados','Principal pagado mensualmente','Garantía del préstamo','a','Intermedio'), // #52
  qObj('¿Cuál es la principal diferencia entre proveedores de remesas formales e informales?','Informales son más baratos.','Formales están regulados y supervisados.','Informales incluyen bancos comerciales.','Formales no reportan acciones.','b','Intermedio'), // #68
  qObj('¿Qué es un corredor hipotecario?','Persona que presta dinero.','Intermediario que compara prestamistas para obtener mejor hipoteca.','Abogado de bienes raíces.','Tasador de propiedades.','b','Intermedio'), // #65
  qObj('Dificultad: ¿Qué es una amortización negativa (aplicación)?','Los pagos no cubren intereses y principal aumenta','Un tipo de ahorro','Un impuesto','Un seguro','a','Difícil'),
  qObj('¿Qué se debe hacer si se encuentra un error en el reporte crediticio?','Ignorarlo.','Asumir correcto.','Corregirlo ante las agencias.','Declararse en bancarrota.','c','Intermedio') // repetido por consistencia
];

/* Ahora construimos los sets balanceados para SF1, SF2 y Final extrayendo bloques de realPool.
   Cada set necesita 20 preguntas (0..9 equipo1, 10..19 equipo2) con distribución 3D/4M/3F.
*/

function takeAndFormat(arr, startIndex){
  // toma 10 preguntas a partir de startIndex (reutiliza si se agota)
  const out = [];
  for(let i=0;i<10;i++){
    const idx = (startIndex + i) % arr.length;
    // si la pregunta tiene nivel 'Difícil' etc ya en arr, la mantenemos; si no, inferimos
    const base = arr[idx];
    out.push(base);
  }
  return out;
}

/* Para SF1: tomamos preguntas desde realPool[0..19] */
const sf1_team1 = takeAndFormat(realPool, 0).map((q,i)=>{
  // ajustamos niveles para garantizar 3D/4M/3F per team by manual assignment:
  const levelOrder = [ 'Fácil','Fácil','Fácil','Intermedio','Intermedio','Intermedio','Intermedio','Difícil','Difícil','Difícil' ];
  return { ...q, level: levelOrder[i] };
});
const sf1_team2 = takeAndFormat(realPool, 10).map((q,i)=>{
  const levelOrder = [ 'Fácil','Fácil','Fácil','Intermedio','Intermedio','Intermedio','Intermedio','Difícil','Difícil','Difícil' ];
  return { ...q, level: levelOrder[i] };
});
quizzes.sf1.questions = [...sf1_team1, ...sf1_team2];

/* SF2: usamos realPool desplazado */
const sf2_team1 = takeAndFormat(realPool, 20).map((q,i)=>{
  const levelOrder = [ 'Fácil','Fácil','Fácil','Intermedio','Intermedio','Intermedio','Intermedio','Difícil','Difícil','Difícil' ];
  return { ...q, level: levelOrder[i] };
});
const sf2_team2 = takeAndFormat(realPool, 30).map((q,i)=>{
  const levelOrder = [ 'Fácil','Fácil','Fácil','Intermedio','Intermedio','Intermedio','Intermedio','Difícil','Difícil','Difícil' ];
  return { ...q, level: levelOrder[i] };
});
quizzes.sf2.questions = [...sf2_team1, ...sf2_team2];

/* Final: usar otro bloque */
const f_team1 = takeAndFormat(realPool, 40).map((q,i)=>{
  const levelOrder = [ 'Fácil','Fácil','Fácil','Intermedio','Intermedio','Intermedio','Intermedio','Difícil','Difícil','Difícil' ];
  return { ...q, level: levelOrder[i] };
});
const f_team2 = takeAndFormat(realPool, 50).map((q,i)=>{
  const levelOrder = [ 'Fácil','Fácil','Fácil','Intermedio','Intermedio','Intermedio','Intermedio','Difícil','Difícil','Difícil' ];
  return { ...q, level: levelOrder[i] };
});
quizzes.f.questions = [...f_team1, ...f_team2];

/* Sanity check: cada quiz debe tener 20 preguntas */
Object.keys(quizzes).forEach(k=>{
  if(!quizzes[k].questions || quizzes[k].questions.length !== 20){
    console.warn('ALERTA: la llave',k,'tiene', (quizzes[k].questions||[]).length, 'preguntas');
  }
});

/* ---------- Estado del bracket ---------- */
const bracketState = {
  q1:{winner:null, scoreA:0, scoreB:0},
  q2:{winner:null, scoreC:0, scoreD:0},
  q3:{winner:null, scoreE:0, scoreF:0},
  q4:{winner:null, scoreG:0, scoreH:0},
  sf1:{winner:null},
  sf2:{winner:null},
  f:{winner:null}
};

/* ---------- UI y lógica del quiz con alternancia y pregunta-por-pregunta ---------- */
const modalBackdrop = document.getElementById('modalBackdrop');
const modal = document.getElementById('modal');
const modalTitle = document.getElementById('modalTitle');
const modalSubtitle = document.getElementById('modalSubtitle');
const quizContainer = document.getElementById('quizContainer');
const closeModal = document.getElementById('closeModal');
const prevBtn = document.getElementById('prevBtn');
const nextBtn = document.getElementById('nextBtn');
const submitQuiz = document.getElementById('submitQuiz');
const progressText = document.getElementById('progressText');

let currentMatchKey = null;
let currentQuiz = null;
let displayOrder = []; // order of indices 0..19 in alternated form
let answers = new Array(20).fill(null); // store selected answers
let currentIndex = 0; // pointer into displayOrder

/* Build alternated order: [0,10,1,11,2,12,...,9,19] */
function buildAlternatedOrder(){
  const order = [];
  for(let i=0;i<10;i++){
    order.push(i);
    order.push(i+10);
  }
  return order;
}

/* Open quiz for matchKey */
function openQuiz(matchKey){
  currentMatchKey = matchKey;
  currentQuiz = quizzes[matchKey];
  if(!currentQuiz){ alert('No hay quiz asignado'); return; }
  modalTitle.textContent = `Llave: ${matchKey.toUpperCase()} — ${currentQuiz.teams[0]} vs ${currentQuiz.teams[1]}`;
  modalSubtitle.textContent = `Tema: ${currentQuiz.topic} — 20 preguntas (alternadas entre equipos)`;
  answers = new Array(20).fill(null);
  displayOrder = buildAlternatedOrder();
  currentIndex = 0;
  renderQuestionAtCurrent();
  modalBackdrop.style.display = 'flex';
  prevBtn.style.display = 'none';
  nextBtn.style.display = 'inline-block';
  submitQuiz.style.display = 'none';
}

/* Render question based on currentIndex */
function renderQuestionAtCurrent(){
  const qPos = displayOrder[currentIndex]; // index in 0..19
  const qData = currentQuiz.questions[qPos];
  const displayNumber = currentIndex + 1; // 1..20
  quizContainer.innerHTML = '';
  const box = document.createElement('div');
  box.className = 'qbox';
  // Which team is this question for? if qPos<10 team1 else team2
  const team = (qPos < 10) ? currentQuiz.teams[0] : currentQuiz.teams[1];
  const qnumForTeam = (qPos < 10) ? (qPos+1) : (qPos-9); // show 1-10 per team
  box.innerHTML = `<div style="display:flex;justify-content:space-between;align-items:center">
                     <div><strong>Pregunta ${displayNumber} (Equipo: ${team} — N° ${qnumForTeam})</strong></div>
                     <div class="small muted">Nivel: ${qData.level}</div>
                   </div>
                   <div style="margin-top:8px">${qData.text}</div>`;
  const opts = document.createElement('div');
  opts.className = 'options';
  ['a','b','c','d'].forEach(letter=>{
    const label = document.createElement('label');
    label.className = 'option';
    label.innerHTML = `<input type="radio" name="qsel" value="${letter}"> <span><strong>${letter}.</strong> ${qData.options[letter]}</span>`;
    // preselect if already answered
    label.querySelector('input').addEventListener('change', ()=>{
      answers[qPos] = letter;
    });
    if(answers[qPos] === letter){
      // set checked after insertion; we'll set attribute after element added
      setTimeout(()=>{ label.querySelector('input').checked = true; }, 0);
    }
    opts.appendChild(label);
  });
  box.appendChild(opts);
  quizContainer.appendChild(box);
  progressText.textContent = `Pregunta ${displayNumber}/20`;
  // prev/next visibility
  prevBtn.style.display = (currentIndex === 0) ? 'none' : 'inline-block';
  nextBtn.style.display = (currentIndex === 19) ? 'none' : 'inline-block';
  submitQuiz.style.display = (currentIndex === 19) ? 'inline-block' : 'none';
}

/* Navigation */
prevBtn.addEventListener('click', ()=>{
  if(currentIndex > 0){ currentIndex--; renderQuestionAtCurrent(); }
});
nextBtn.addEventListener('click', ()=>{
  if(currentIndex < 19){ currentIndex++; renderQuestionAtCurrent(); }
});

/* Submit: compute weighted scores and determine winner */
submitQuiz.addEventListener('click', ()=>{
  // compute scores
  let score1 = 0, score2 = 0;
  for(let i=0;i<20;i++){
    const q = currentQuiz.questions[i];
    const ans = answers[i];
    if(ans && ans === q.correct){
      const w = WEIGHTS[q.level] || 1;
      if(i < 10) score1 += w; else score2 += w;
    }
  }
  // determine winner with tie break
  let winnerLabel = null;
  if(score1 > score2) winnerLabel = currentQuiz.teams[0];
  else if(score2 > score1) winnerLabel = currentQuiz.teams[1];
  else {
    if(confirm('Empate. ¿Deseas desempatar aleatoriamente? (Ok = aleatorio, Cancel = manual)')){
      winnerLabel = Math.random() < 0.5 ? currentQuiz.teams[0] : currentQuiz.teams[1];
    } else {
      const pick = prompt(`Empate. Escribe 1 para ${currentQuiz.teams[0]} o 2 para ${currentQuiz.teams[1]}`);
      if(pick==='1') winnerLabel = currentQuiz.teams[0];
      else if(pick==='2') winnerLabel = currentQuiz.teams[1];
      else { alert('Entrada inválida. Se aplicará desempate aleatorio.'); winnerLabel = Math.random() < 0.5 ? currentQuiz.teams[0] : currentQuiz.teams[1]; }
    }
  }

  // apply results to bracket (update UI)
  applyResultToBracket(currentMatchKey, score1, score2, winnerLabel);
  modalBackdrop.style.display = 'none';
});

/* click handlers: abrir modal al click (cuartos) o dblclick para semis/final */
document.querySelectorAll('.match').forEach(el=>{
  const key = el.getAttribute('data-match');
  if(!key) return;
  // For semifinal and final prefer double click to avoid accidental openings; for quarters single click
  if(key.startsWith('q')){
    el.addEventListener('click', ()=>openQuiz(key));
  } else {
    el.addEventListener('dblclick', ()=>openQuiz(key));
  }
});

/* modal close */
closeModal.addEventListener('click', ()=>{ modalBackdrop.style.display = 'none'; });
modalBackdrop.addEventListener('click', (e)=>{ if(e.target === modalBackdrop) modalBackdrop.style.display='none'; });

/* applyResultToBracket updates UI and propagates winners */
function applyResultToBracket(matchKey, s1, s2, winnerLabel){
  if(matchKey==='q1'){
    document.getElementById('score-q1-A').textContent = s1;
    document.getElementById('score-q1-B').textContent = s2;
    bracketState.q1.scoreA = s1; bracketState.q1.scoreB = s2; bracketState.q1.winner = winnerLabel;
  } else if(matchKey==='q2'){
    document.getElementById('score-q2-C').textContent = s1;
    document.getElementById('score-q2-D').textContent = s2;
    bracketState.q2.scoreC = s1; bracketState.q2.scoreD = s2; bracketState.q2.winner = winnerLabel;
  } else if(matchKey==='q3'){
    document.getElementById('score-q3-E').textContent = s1;
    document.getElementById('score-q3-F').textContent = s2;
    bracketState.q3.scoreE = s1; bracketState.q3.scoreF = s2; bracketState.q3.winner = winnerLabel;
  } else if(matchKey==='q4'){
    document.getElementById('score-q4-G').textContent = s1;
    document.getElementById('score-q4-H').textContent = s2;
    bracketState.q4.scoreG = s1; bracketState.q4.scoreH = s2; bracketState.q4.winner = winnerLabel;
  } else if(matchKey==='sf1'){
    document.getElementById('score-sf1-1').textContent = s1;
    document.getElementById('score-sf1-2').textContent = s2;
    bracketState.sf1.winner = winnerLabel;
    // place into final slot
    document.getElementById('f-team1').querySelector('.team-name').textContent = winnerLabel;
    document.getElementById('score-f-1').textContent = '—';
  } else if(matchKey==='sf2'){
    document.getElementById('score-sf2-1').textContent = s1;
    document.getElementById('score-sf2-2').textContent = s2;
    bracketState.sf2.winner = winnerLabel;
    document.getElementById('f-team2').querySelector('.team-name').textContent = winnerLabel;
    document.getElementById('score-f-2').textContent = '—';
  } else if(matchKey==='f'){
    document.getElementById('score-f-1').textContent = s1;
    document.getElementById('score-f-2').textContent = s2;
    bracketState.f.winner = winnerLabel;
    setTimeout(()=>alert(`¡Campeón del torneo: ${winnerLabel}!`),200);
  }

  // mark winner visually in source match UI
  markWinnerInMatchUI(matchKey, winnerLabel);
  // propagate quarters to semis placeholders
  propagateQuarterToSemi();
}

/* propagate quarter winners to semis placeholders */
function propagateQuarterToSemi(){
  if(bracketState.q1.winner){
    document.getElementById('sf1-team1').querySelector('.team-name').textContent = bracketState.q1.winner;
  }
  if(bracketState.q2.winner){
    document.getElementById('sf1-team2').querySelector('.team-name').textContent = bracketState.q2.winner;
  }
  if(bracketState.q3.winner){
    document.getElementById('sf2-team1').querySelector('.team-name').textContent = bracketState.q3.winner;
  }
  if(bracketState.q4.winner){
    document.getElementById('sf2-team2').querySelector('.team-name').textContent = bracketState.q4.winner;
  }
}

/* mark winner visually */
function markWinnerInMatchUI(matchKey, winner){
  // simple: find the match element and apply .winner to the team-row matching text
  const matchEl = document.querySelector(`[data-match="${matchKey}"]`);
  if(matchEl){
    matchEl.querySelectorAll('.team-row').forEach(r=>r.classList.remove('winner'));
    matchEl.querySelectorAll('.team-row').forEach(r=>{
      const nm = r.querySelector('.team-name').textContent.trim();
      if(nm === winner) r.classList.add('winner');
    });
  }
  // also try in semifinal/final placeholders
  document.querySelectorAll('.final-box').forEach(box=>{
    box.querySelectorAll('.team-row').forEach(r=>r.classList.remove('winner'));
    box.querySelectorAll('.team-row').forEach(r=>{
      const nm = r.querySelector('.team-name').textContent.trim();
      if(nm === winner) r.classList.add('winner');
    });
  });
}

/* Reset */
document.getElementById('resetBtn').addEventListener('click', ()=>{
  if(!confirm('¿Seguro que deseas resetear todo el bracket?')) return;
  // reset state
  for(const k in bracketState) bracketState[k] = { winner:null };
  // clear visible scores and names to initial
  document.getElementById('score-q1-A').textContent='—'; document.getElementById('score-q1-B').textContent='—';
  document.getElementById('score-q2-C').textContent='—'; document.getElementById('score-q2-D').textContent='—';
  document.getElementById('score-q3-E').textContent='—'; document.getElementById('score-q3-F').textContent='—';
  document.getElementById('score-q4-G').textContent='—'; document.getElementById('score-q4-H').textContent='—';
  document.getElementById('sf1-team1').querySelector('.team-name').textContent='—';
  document.getElementById('sf1-team2').querySelector('.team-name').textContent='—';
  document.getElementById('sf2-team1').querySelector('.team-name').textContent='—';
  document.getElementById('sf2-team2').querySelector('.team-name').textContent='—';
  document.getElementById('f-team1').querySelector('.team-name').textContent='—';
  document.getElementById('f-team2').querySelector('.team-name').textContent='—';
  document.querySelectorAll('.team-row').forEach(r=>r.classList.remove('winner'));
  document.getElementById('score-sf1-1').textContent='—'; document.getElementById('score-sf1-2').textContent='—';
  document.getElementById('score-sf2-1').textContent='—'; document.getElementById('score-sf2-2').textContent='—';
  document.getElementById('score-f-1').textContent='—'; document.getElementById('score-f-2').textContent='—';
});

/* Initialize: allow opening SF and Final with dblclick already set in listener above */

console.log('Quizzes cargados:', Object.keys(quizzes).length);
</script>
</body>
</html>
